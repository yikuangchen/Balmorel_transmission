*--------------------------------------------------------------------------------------------------
* idenfication of technologies affected by fuel, emission or technology potential constraints
*--------------------------------------------------------------------------------------------------

*IGMINF
ITV_REQMIN(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), IGMINF(Y,C,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMIN(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), IGMINF(Y,IR,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMIN(Y,IA,G)$(SUM(FFF$IGF(G,FFF), IGMINF(Y,IA,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);

*FKMIN
ITV_REQMIN(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FKMIN(Y,C,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMIN(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FKMIN(Y,IR,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMIN(Y,IA,G)$(SUM(FFF$IGF(G,FFF), FKMIN(Y,IA,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);

*IGEQF
ITV_REQFX(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), IGEQF(Y,C,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQFX(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), IGEQF(Y,IR,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQFX(Y,IA,G)$(SUM(FFF$IGF(G,FFF), IGEQF(Y,IA,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);

*FKEQ
ITV_REQFX(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FKEQ(Y,C,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQFX(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FKEQ(Y,IR,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQFX(Y,IA,G)$(SUM(FFF$IGF(G,FFF), FKEQ(Y,IA,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);

*IGMAXF
ITV_REQMAX(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), IGMAXF(Y,C,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), IGMAXF(Y,IR,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(SUM(FFF$IGF(G,FFF), IGMAXF(Y,IA,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);

ITV_ZERO(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), IGMAXF(Y,C,FFF)) AND (SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), IGMAXF(Y,C,FFF)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), IGMAXF(Y,IR,FFF)) AND (SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), IGMAXF(Y,IR,FFF)) = EPS) ) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(SUM(FFF$IGF(G,FFF), IGMAXF(Y,IA,FFF)) AND (SUM(FFF$IGF(G,FFF), IGMAXF(Y,IA,FFF)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);

*FKPOT
ITV_REQMAX(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FKPOT(C,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FKPOT(IR,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(SUM(FFF$IGF(G,FFF), FKPOT(IA,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);

ITV_ZERO(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FKPOT(C,FFF)) AND (SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FKPOT(C,FFF)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FKPOT(IR,FFF)) AND (SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FKPOT(IR,FFF)) = EPS) ) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(SUM(FFF$IGF(G,FFF), FKPOT(IA,FFF)) AND (SUM(FFF$IGF(G,FFF), FKPOT(IA,FFF)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);


*FKMAX
ITV_REQMAX(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FKMAX(Y,C,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FKMAX(Y,IR,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(SUM(FFF$IGF(G,FFF), FKMAX(Y,IA,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);

ITV_ZERO(Y,IA,G)$(SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FKMAX(Y,C,FFF)) AND (SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FKMAX(Y,C,FFF)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FKMAX(Y,IR,FFF)) AND (SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FKMAX(Y,IR,FFF)) = EPS) ) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(SUM(FFF$IGF(G,FFF), FKMAX(Y,IA,FFF)) AND (SUM(FFF$IGF(G,FFF), FKMAX(Y,IA,FFF)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);


*TECHGROUPKPOT
ITV_REQMAX(Y,IA,G)$(SUM((TECH_GROUP,C)$((GDATA(G,'GDTECHGROUP') EQ TECH_GROUP_VALUE(TECH_GROUP)) AND ICA(C,IA)), TECHGROUPKPOT(C,TECH_GROUP)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(SUM((TECH_GROUP,IR)$((GDATA(G,'GDTECHGROUP') EQ TECH_GROUP_VALUE(TECH_GROUP)) AND RRRAAA(IR,IA)), TECHGROUPKPOT(IR,TECH_GROUP)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(SUM(TECH_GROUP$(GDATA(G,'GDTECHGROUP') EQ TECH_GROUP_VALUE(TECH_GROUP)), TECHGROUPKPOT(IA,TECH_GROUP)) >0) = YES$IAGKNY_IY411(Y,IA,G);

ITV_ZERO(Y,IA,G)$(SUM((TECH_GROUP,C)$((GDATA(G,'GDTECHGROUP') EQ TECH_GROUP_VALUE(TECH_GROUP)) AND ICA(C,IA)), TECHGROUPKPOT(C,TECH_GROUP)) AND (SUM((TECH_GROUP,C)$((GDATA(G,'GDTECHGROUP') EQ TECH_GROUP_VALUE(TECH_GROUP)) AND ICA(C,IA)), TECHGROUPKPOT(C,TECH_GROUP)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(SUM((TECH_GROUP,IR)$((GDATA(G,'GDTECHGROUP') EQ TECH_GROUP_VALUE(TECH_GROUP)) AND RRRAAA(IR,IA)), TECHGROUPKPOT(IR,TECH_GROUP)) AND (SUM((TECH_GROUP,IR)$((GDATA(G,'GDTECHGROUP') EQ TECH_GROUP_VALUE(TECH_GROUP)) AND RRRAAA(IR,IA)), TECHGROUPKPOT(IR,TECH_GROUP)) = EPS) ) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(SUM(TECH_GROUP$(GDATA(G,'GDTECHGROUP') EQ TECH_GROUP_VALUE(TECH_GROUP)), TECHGROUPKPOT(IA,TECH_GROUP)) AND (SUM(TECH_GROUP$(GDATA(G,'GDTECHGROUP') EQ TECH_GROUP_VALUE(TECH_GROUP)), TECHGROUPKPOT(IA,TECH_GROUP)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);

*FGEMIN
ITV_REQEMIN(Y,IA,G)$(IGE(G) AND NOT IGETOH(G) AND SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FGEMIN(C,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQEMIN(Y,IA,G)$(IGE(G) AND NOT IGETOH(G) AND SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FGEMIN(IR,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQEMIN(Y,IA,G)$(IGE(G) AND NOT IGETOH(G) AND SUM(FFF$IGF(G,FFF), FGEMIN(IA,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);

*FGEMAX
ITV_REQEMAX(Y,IA,G)$(IGE(G) AND NOT IGETOH(G) AND SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FGEMAX(C,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQEMAX(Y,IA,G)$(IGE(G) AND NOT IGETOH(G) AND SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FGEMAX(IR,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQEMAX(Y,IA,G)$(IGE(G) AND NOT IGETOH(G) AND SUM(FFF$IGF(G,FFF), FGEMAX(IA,FFF)) >0) = YES$IAGKNY_IY411(Y,IA,G);

ITV_ZEROEL(Y,IA,G)$(IGE(G) AND NOT IGETOH(G) AND SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FGEMAX(C,FFF)) AND (SUM((FFF,C)$(IGF(G,FFF) AND ICA(C,IA)), FGEMAX(C,FFF)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZEROEL(Y,IA,G)$(IGE(G) AND NOT IGETOH(G) AND SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FGEMAX(IR,FFF)) AND (SUM((FFF,IR)$(IGF(G,FFF) AND RRRAAA(IR,IA)), FGEMAX(IR,FFF)) = EPS) ) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZEROEL(Y,IA,G)$(IGE(G) AND NOT IGETOH(G) AND SUM(FFF$IGF(G,FFF), FGEMAX(IA,FFF)) AND (SUM(FFF$IGF(G,FFF), FGEMAX(IA,FFF)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);

*M_POL limits
ITV_REQMAX(Y,IA,G)$(SUM(FFF$IGF(G,FFF),FDATA(FFF,'FDCO2'))  AND (SUM(C$ICA(C,IA), M_POL(Y,'LIM_CO2',C)) > 0)) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(SUM(FFF$IGF(G,FFF), FDATA(FFF,'FDSO2')) AND (SUM(C$ICA(C,IA), M_POL(Y,'LIM_SO2',C)) > 0)) = YES$IAGKNY_IY411(Y,IA,G);
ITV_REQMAX(Y,IA,G)$(GDATA(G,'GDNOX')                        AND (SUM(C$ICA(C,IA), M_POL(Y,'LIM_NOX',C)) > 0)) = YES$IAGKNY_IY411(Y,IA,G);

* M_POL zero emission
ITV_ZERO(Y,IA,G)$(SUM(FFF$IGF(G,FFF),FDATA(FFF,'FDCO2'))  AND SUM(C$ICA(C,IA), M_POL(Y,'LIM_CO2',C)) AND (SUM(C$ICA(C,IA), M_POL(Y,'LIM_CO2',C)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(SUM(FFF$IGF(G,FFF), FDATA(FFF,'FDSO2')) AND SUM(C$ICA(C,IA), M_POL(Y,'LIM_SO2',C)) AND (SUM(C$ICA(C,IA), M_POL(Y,'LIM_SO2',C)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);
ITV_ZERO(Y,IA,G)$(GDATA(G,'GDNOX')                        AND SUM(C$ICA(C,IA), M_POL(Y,'LIM_NOX',C)) AND (SUM(C$ICA(C,IA), M_POL(Y,'LIM_NOX',C)) = EPS)) = YES$IAGKNY_IY411(Y,IA,G);



** Finding the cost of the cheapest investment option in condencing power plant and heat only boiler. This is used to calculate alternative value later on.
*Cost per unit of electricity or heat generated for the cheapest plant in the screening curve without considering plants with maxium and fixed fuel requirements
ITV_CHEAPESTCND(Y,IA,TV_FLH) = SMIN(G$(IGCND(G)  AND IAGKNY_IY411(Y,IA,G) AND NOT ITV_REQEMAX(Y,IA,G) AND NOT ITV_REQMAX(Y,IA,G) AND NOT ITV_REQFX(Y,IA,G)),
                 ITV_FIXED(Y,IA,G) + ITV_VAREL(Y,IA,G) * TV_FLH.VAL);

ITV_CHEAPESTHOB(Y,IA,TV_FLHHEAT)$(ITV_HEATA(Y,IA)) = SMIN(G$(IGHOB(G)  AND IAGKNY_IY411(Y,IA,G) AND NOT ITV_REQEMAX(Y,IA,G) AND NOT ITV_REQMAX(Y,IA,G) AND NOT ITV_REQFX(Y,IA,G)),
                 ITV_FIXED(Y,IA,G) + ITV_VARHEAT(Y,IA,G) * TV_FLHHEAT.VAL);

* Finding the cost of the cheapest CND option per region
ITV_CHEAPESTCNDR(Y,IR,TV_FLH) = SMIN(IA$RRRAAA(IR,IA), ITV_CHEAPESTCND(Y,IA,TV_FLH));